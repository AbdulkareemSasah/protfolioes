---
interface Props {
    content: any;
    maxWidth?: "sm" | "md" | "lg" | "full";
}

import { marked } from "marked";
const { content = "", maxWidth = "md" } = Astro.props;

const htmlContent = content ? marked.parse(content) : "";

const maxWidths: Record<string, string> = {
    sm: "600px",
    md: "800px",
    lg: "1000px",
    full: "100%",
};
---

<section class="text-section section">
    <div class="container">
        <div
            class="text-content prose"
            style={`max-width: ${maxWidths[maxWidth]}`}
            set:html={htmlContent}
        />
    </div>
</section>

<style>
    .text-section {
        background: var(--color-background);
    }

    .text-content {
        margin: 0 auto;
    }

    .prose {
        line-height: 1.8;
    }

    .prose :global(h2) {
        font-size: 2rem;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    .prose :global(h3) {
        font-size: 1.5rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
    }

    .prose :global(h4) {
        font-size: 1.25rem;
        margin-top: 1.25rem;
        margin-bottom: 0.5rem;
    }

    .prose :global(p) {
        margin-bottom: 1.25rem;
    }

    .prose :global(ul),
    .prose :global(ol) {
        margin-bottom: 1.25rem;
        padding-right: 1.5rem;
    }

    .prose :global(li) {
        margin-bottom: 0.5rem;
        color: var(--color-text-muted);
    }

    .prose :global(blockquote) {
        margin: 2rem 0;
        padding: 1.5rem 2rem;
        background: var(--color-surface);
        border-radius: var(--radius-lg);
        border-right: 4px solid var(--color-accent);
        font-style: italic;
    }

    .prose :global(blockquote p) {
        margin-bottom: 0;
        color: var(--color-text);
    }

    .prose :global(a) {
        color: var(--color-accent);
        text-decoration: underline;
        text-underline-offset: 3px;
    }

    .prose :global(a:hover) {
        text-decoration: none;
    }

    .prose :global(img) {
        margin: 2rem 0;
        border-radius: var(--radius-lg);
    }

    .prose :global(code) {
        background: var(--color-surface);
        padding: 0.2rem 0.4rem;
        border-radius: var(--radius-sm);
        font-size: 0.9em;
    }

    .prose :global(pre) {
        margin: 1.5rem 0;
        padding: 1.5rem;
        background: var(--color-surface);
        border-radius: var(--radius-lg);
        overflow-x: auto;
    }

    .prose :global(pre code) {
        background: transparent;
        padding: 0;
    }

    .prose :global(hr) {
        margin: 3rem 0;
        border: none;
        height: 1px;
        background: var(--color-surface);
    }

    .prose :global(table) {
        width: 100%;
        margin: 2rem 0;
        border-collapse: collapse;
    }

    .prose :global(th),
    .prose :global(td) {
        padding: 0.75rem 1rem;
        text-align: right;
        border-bottom: 1px solid var(--color-surface);
    }

    .prose :global(th) {
        font-weight: 600;
        color: var(--color-text);
    }

    .prose :global(td) {
        color: var(--color-text-muted);
    }

    @media (max-width: 768px) {
        .prose :global(h2) {
            font-size: 1.5rem;
        }

        .prose :global(h3) {
            font-size: 1.25rem;
        }

        .prose :global(blockquote) {
            padding: 1rem 1.5rem;
        }
    }
</style>
